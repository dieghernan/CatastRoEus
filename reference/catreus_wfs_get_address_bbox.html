<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve Address Data in Pais Vasco Based on Bounding Box Coordinates — catreus_wfs_get_address_bbox • CatastRoEus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve Address Data in Pais Vasco Based on Bounding Box Coordinates — catreus_wfs_get_address_bbox"><meta name="description" content="This function fetches addresses data within a specified bounding box. It first checks if the provided coordinates are valid,
determines the province based on these coordinates using reverse geocoding, and fetches address data for
Bizkaia or Gipuzkoa accordingly. It supports transformations between geographical and UTM coordinate systems,
handles multiple Coordinate Reference Systems (CRS), and manages different minimum counts for returned records."><meta property="og:description" content="This function fetches addresses data within a specified bounding box. It first checks if the provided coordinates are valid,
determines the province based on these coordinates using reverse geocoding, and fetches address data for
Bizkaia or Gipuzkoa accordingly. It supports transformations between geographical and UTM coordinate systems,
handles multiple Coordinate Reference Systems (CRS), and manages different minimum counts for returned records."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenSpain"><meta name="twitter:site" content="@rOpenSpain"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rostemplate.min.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
  <a class="navbar-brand me-2" href="../index.html">
    <img src="../apple-touch-icon-180x180.png" alt="CatastRoEus logo" height="40" class="d-inline-block me-1">CatastRoEus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/CatastRoEus.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenSpain/CatastRoEus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Retrieve Address Data in Pais Vasco Based on Bounding Box Coordinates</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenSpain/CatastRoEus/blob/main/R/wfs_eus_ad.R" class="external-link"><code>R/wfs_eus_ad.R</code></a></small>
      <div class="d-none name"><code>catreus_wfs_get_address_bbox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function fetches addresses data within a specified bounding box. It first checks if the provided coordinates are valid,
determines the province based on these coordinates using reverse geocoding, and fetches address data for
Bizkaia or Gipuzkoa accordingly. It supports transformations between geographical and UTM coordinate systems,
handles multiple Coordinate Reference Systems (CRS), and manages different minimum counts for returned records.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">catreus_wfs_get_address_bbox</span><span class="op">(</span><span class="va">x</span>, srs <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, count <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Bounding box coordinates or a spatial object, which could be:</p><ul><li><p>A numeric vector of length 4 with the coordinates defining the bounding box:
<code>c(latitude1, longitude1, latitude2, longitude2)</code>.</p></li>
<li><p>An <code>sf/sfc</code> object from the <a href="https://CRAN.R-project.org/package=sf" class="external-link"><span class="pkg">sf</span></a> package.</p></li>
</ul></dd>


<dt id="arg-srs">srs<a class="anchor" aria-label="anchor" href="#arg-srs"></a></dt>
<dd><p>Spatial Reference System (SRS) or Coordinate Reference System (CRS) code
to be used in the query. For best results, ensure the coordinates are in ETRS89
(EPSG:25830) or WGS84 (EPSG:4326) when using latitude and longitude.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, additional information about function operations
is printed. Useful for debugging. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-count">count<a class="anchor" aria-label="anchor" href="#arg-count"></a></dt>
<dd><p>Integer specifying the maximum number of address records to return,
or <code>NULL</code> to use default settings of the API service.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Depending on the input and geographic location, this function may return:</p><ul><li><p>A message detailing the success of the query and the province fetched.</p></li>
<li><p>A warning message if the bounding box spans multiple provinces.</p></li>
<li><p>An error message if the coordinates are not within Pais Vasco.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses reverse geocoding to determine the province within the Basque Country
from the coordinates provided. Based on the province, it delegates the data fetching to
specific functions handling each province's data. It supports flexible input types and
handles geographical coordinate transformations internally if needed.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></code>, which is used to manage spatial bounding boxes.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define bounding box coordinates for an urban location in Gipuzkoa</span></span></span>
<span class="r-in"><span><span class="va">coords_gipuzkoa</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">582745.070132</span>,<span class="fl">4795611.169048</span>,<span class="fl">584249.337348</span>,<span class="fl">4796830.604835</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch address data using the bounding box</span></span></span>
<span class="r-in"><span><span class="va">addresses_gipuzkoa</span> <span class="op">&lt;-</span> <span class="fu">catreus_wfs_get_address_bbox</span><span class="op">(</span><span class="va">coords_gipuzkoa</span>, srs <span class="op">=</span> <span class="fl">25830</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Passing 1 coordinate to the Nominatim single coordinate geocoder</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Query completed in: 1 seconds</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Passing 1 coordinate to the Nominatim single coordinate geocoder</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Query completed in: 1 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Province of Gipuzkoa:"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-------------------------------"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Plot the buildings data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">addresses_gipuzkoa</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Addresses Data for Gipuzkoa"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="catreus_wfs_get_address_bbox-1.png" alt="" width="2188" height="1352"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define bounding box coordinates for a location in Bizkaia</span></span></span>
<span class="r-in"><span><span class="va">coords_bizkaia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">499307.414680</span>, <span class="fl">4792958.784686</span>, <span class="fl">502508.961032</span>, <span class="fl">4796815.771278</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch address data using the bounding box</span></span></span>
<span class="r-in"><span><span class="va">addresses_bizkaia</span> <span class="op">&lt;-</span> <span class="fu">catreus_wfs_get_address_bbox</span><span class="op">(</span><span class="va">coords_bizkaia</span>, srs <span class="op">=</span> <span class="fl">25830</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Passing 1 coordinate to the Nominatim single coordinate geocoder</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Query completed in: 1 seconds</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Passing 1 coordinate to the Nominatim single coordinate geocoder</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Query completed in: 1 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Province of Bizkaia:"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-------------------------------"</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>incomplete final line found on 'C:\Users\RUNNER~1\AppData\Local\Temp\RtmpaGdNLX/filec4f89199e.gml'</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GDAL Message 1: Field with same name (identifier) already exists in (Address). Skipping newer ones</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GDAL Message 1: Field with same name (identifier) already exists in (Address). Skipping newer ones</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Plot the buildings data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">addresses_bizkaia</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Addresses Data for Bizkaia"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="catreus_wfs_get_address_bbox-2.png" alt="" width="2188" height="1352"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span>  </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>

  <!-- ropenspain rostemplate -->
<footer id="footer"><div class="container">
    <div class="row">
      <div class="col-md">
        <h4 data-toc-skip>About <img src="../logo.png" alt="CatastRoEus Logo" height="24"> CatastRoEus</h4>
        <p>Developed by Jimena Salinero.</p>
        <p>Part of the <span class="ROS-light">rOpenSpain</span> project.</p>
        <hr class="d-md-none"></div>
      <div class="col-md offset-md-4">
        <h4 data-toc-skip>About <img src="../ROS-logo.png" alt="ROpenSpain Logo" height="24"><span class="ROS-light"> rOpenSpain</span></h4>
        <a href="https://ropenspain.es/" class="external-link"><span class="ROS-light">rOpenSpain</span></a> is a community of R enthusiasts whose ultimate goal is to create high-quality R packages for data mining public Spanish open sources.
        <hr class="d-md-none"></div>
   </div>
  </div>
</footer><div id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md text-center text-lg-start">
        <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
      </div>
      <div class="col-md offset-md-4 text-center text-lg-start">
      <p>Template <a href="https://github.com/ropenspain/rostemplate/" class="external-link">rostemplate</a> by <a href="https://github.com/dieghernan/" class="external-link">dieghernan</a>, based on <a href="https://bootstrapious.com/" class="external-link">Bootstrapious</a>.
      </p>
      </div>
    </div>
  </div>
</div>




  <script>
var h1s = document.getElementsByTagName("h1");
var myH1;
if (h1s.length > 0) {
  myH1 = h1s[0];
  myH1.classList.add("ROSh1");
}
</script></body></html>

